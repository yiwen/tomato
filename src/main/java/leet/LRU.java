package leet;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * Created by ygao on 2/23/16.
 */
public class LRU {
    public class ListNode {
        int val;
        int key;
        ListNode next;
        ListNode prev;

        ListNode(int x, int y) {
            key = x;
            val = y;
        }


    }

    //   public class Solution {
    int capatity;
    Map<Integer, ListNode> map;
    ListNode head;
    ListNode tail;

    // @param capacity, an integer
    public LRU(int capacity) {
        // write your code here
        map = new HashMap<Integer, ListNode>();
        this.capatity = capacity;
        head = new ListNode(0, 0);
        tail = new ListNode(0, 0);
        head.next = tail;
        tail.prev = head;


    }

    // @return an integer
    public int get(int key) {
        // write your code here
        if (!map.containsKey(key)) {
            System.out.print("-1,");

            return -1;
        }
        ListNode tmp = map.get(key);

        tmp.prev.next = tmp.next;
        tmp.next.prev = tmp.prev;

        moveToTail(tmp);
        System.out.print(tmp.val + ",");
        return tmp.val;
    }

    private void moveToTail(ListNode tmp) {

        tmp.prev = tail.prev;
        tmp.next = tail;
        tail.prev.next = tmp;
        tail.prev = tmp;
    }


    // @param key, an integer
    // @param value, an integer
    // @return nothing
    public void set(int key, int value) {
        // write your code her
        if (map.containsKey(key)) {
            map.get(key).val = value;
        }
        if (capatity == 0) {
            return;
        }
        if (capatity == map.size()) {
            map.remove(head.next.key);
            head.next = head.next.next;
        }
        ListNode node = new ListNode(key, value);
        map.put(key, node);
        moveToTail(node);
        return;

    }
    // }

    public static void main(String[] args) {
        LRU solution = new LRU(115);
        solution.set(33, 219);solution.get(39);solution.set(96,56);solution.get(129);solution.get(115);solution.get(112);solution.set(3,280);solution.get(40);solution.set(85,193);solution.set(10,10);solution.set(100,136);solution.set(12,66);solution.set(81,261);solution.set(33,58);solution.get(3);solution.set(121,308);solution.set(129,263);solution.get(105);solution.set(104,38);solution.set(65,85);solution.set(3,141);solution.set(29,30);solution.set(80,191);solution.set(52,191);solution.set(8,300);solution.get(136);solution.set(48,261);solution.set(3,193);solution.set(133,193);solution.set(60,183);solution.set(128,148);solution.set(52,176);solution.get(48);solution.set(48,119);solution.set(10,241);solution.get(124);solution.set(130,127);solution.get(61);solution.set(124,27);solution.get(94);solution.set(29,304);solution.set(102,314);solution.get(110);solution.set(23,49);solution.set(134,12);solution.set(55,90);solution.get(14);solution.get(104);solution.set(77,165);solution.set(60,160);solution.get(117);solution.set(58,30);solution.get(54);solution.get(136);solution.get(128);solution.get(131);solution.set(48,114);solution.get(136);solution.set(46,51);solution.set(129,291);solution.set(96,207);solution.get(131);solution.set(89,153);solution.set(120,154);solution.get(111);solution.get(47);solution.get(5);solution.set(114,157);solution.set(57,82);solution.set(113,106);solution.set(74,208);solution.get(56);solution.get(59);solution.get(100);solution.get(132);solution.set(127,202);solution.get(75);solution.set(102,147);solution.get(37);solution.set(53,79);solution.set(119,220);solution.get(47);solution.get(101);solution.get(89);solution.get(20);solution.get(93);solution.get(7);solution.set(48,109);solution.set(71,146);solution.get(43);solution.get(122);solution.set(3,160);solution.get(17);solution.set(80,22);solution.set(80,272);solution.get(75);solution.get(117);solution.set(76,204);solution.set(74,141);solution.set(107,93);solution.set(34,280);solution.set(31,94);solution.get(132);solution.set(71,258);solution.get(61);solution.get(60);solution.set(69,272);solution.get(46);solution.set(42,264);solution.set(87,126);solution.set(107,236);solution.set(131,218);solution.get(79);solution.set(41,71);solution.set(94,111);solution.set(19,124);solution.set(52,70);solution.get(131);solution.get(103);solution.get(81);solution.get(126);solution.set(61,279);solution.set(37,100);solution.get(95);solution.get(54);solution.set(59,136);solution.set(101,219);solution.set(15,248);solution.set(37,91);solution.set(11,174);solution.set(99,65);solution.set(105,249);solution.get(85);solution.set(108,287);solution.set(96,4);solution.get(70);solution.get(24);solution.set(52,206);solution.set(59,306);solution.set(18,296);solution.set(79,95);solution.set(50,131);solution.set(3,161);solution.set(2,229);solution.set(39,183);solution.set(90,225);solution.set(75,23);solution.set(136,280);solution.get(119);solution.set(81,272);solution.get(106);solution.get(106);solution.get(70);solution.set(73,60);solution.set(19,250);solution.set(82,291);solution.set(117,53);solution.set(16,176);solution.get(40);solution.set(7,70);solution.set(135,212);solution.get(59);solution.set(81,201);solution.set(75,305);solution.get(101);solution.set(8,250);solution.get(38);solution.set(28,220);solution.get(21);solution.set(105,266);solution.get(105);solution.get(85);solution.get(55);solution.get(6);solution.set(78,83);solution.get(126);solution.get(102);solution.get(66);solution.set(61,42);solution.set(127,35);solution.set(117,105);solution.get(128);solution.get(102);solution.get(50);solution.set(24,133);solution.set(40,178);solution.set(78,157);solution.set(71,22);solution.get(25);solution.get(82);solution.get(129);solution.set(126,12);solution.get(45);solution.get(40);solution.get(86);solution.get(100);solution.set(30,110);solution.get(49);solution.set(47,185);solution.set(123,101);solution.get(102);solution.get(5);solution.set(40,267);solution.set(48,155);solution.get(108);solution.get(45);solution.set(14,182);solution.set(20,117);solution.set(43,124);solution.get(38);solution.set(77,158);solution.get(111);solution.get(39);solution.set(69,126);solution.set(113,199);solution.set(21,216);solution.get(11);solution.set(117,207);solution.get(30);solution.set(97,84);solution.get(109);solution.set(99,218);solution.get(109);solution.set(113,1);solution.get(62);solution.set(49,89);solution.set(53,311);solution.get(126);solution.set(32,153);solution.set(14,296);solution.get(22);solution.set(14,225);solution.get(49);solution.get(75);solution.set(61,241);solution.get(7);solution.get(6);solution.get(31);solution.set(75,15);solution.get(115);solution.set(84,181);solution.set(125,111);solution.set(105,94);solution.set(48,294);solution.get(106);solution.get(61);solution.set(53,190);solution.get(16);solution.set(12,252);solution.get(28);solution.set(111,122);solution.get(122);solution.set(10,21);solution.get(59);solution.get(72);solution.get(39);solution.get(6);solution.get(126);solution.set(131,177);solution.set(105,253);solution.get(26);solution.set(43,311);solution.get(79);solution.set(91,32);solution.set(7,141);solution.get(38);solution.get(13);solution.set(79,135);solution.get(43);solution.get(94);solution.set(80,182);solution.get(53);solution.set(120,309);solution.set(3,109);solution.get(97);solution.set(9,128);solution.set(114,121);solution.get(56);solution.get(56);solution.set(124,86);solution.set(34,145);solution.get(131);solution.get(78);solution.set(86,21);solution.get(98);solution.set(115,164);solution.set(47,225);solution.get(95);solution.set(89,55);solution.set(26,134);solution.set(8,15);solution.get(11);solution.set(84,276);solution.set(81,67);solution.get(46);solution.get(39);solution.get(92);solution.get(96);solution.set(89,51);solution.set(136,240);solution.get(45);solution.get(27);solution.set(24,209);solution.set(82,145);solution.get(10);solution.set(104,225);solution.set(120,203);solution.set(121,108);solution.set(11,47);solution.get(89);solution.set(80,66);solution.get(16);solution.set(95,101);solution.get(49);solution.get(1);solution.set(77,184);solution.get(27);solution.set(74,313);solution.set(14,118);solution.get(16);solution.get(74);solution.set(88,251);solution.get(124);solution.set(58,101);solution.set(42,81);solution.get(2);solution.set(133,101);solution.get(16);solution.set(1,254);solution.set(25,167);solution.set(53,56);solution.set(73,198);solution.get(48);solution.get(30);solution.get(95);solution.set(90,102);solution.set(92,56);solution.set(2,130);solution.set(52,11);solution.get(9);solution.get(23);solution.set(53,275);solution.set(23,258);solution.get(57);solution.set(136,183);solution.set(75,265);solution.get(85);solution.set(68,274);solution.set(15,255);solution.get(85);solution.set(33,314);solution.set(101,223);solution.set(39,248);solution.set(18,261);solution.set(37,160);solution.get(112);solution.get(65);solution.set(31,240);solution.set(40,295);solution.set(99,231);solution.get(123);solution.set(34,43);solution.get(87);solution.get(80);solution.set(47,279);solution.set(89,299);solution.get(72);solution.set(26,277);solution.set(92,13);solution.set(46,92);solution.set(67,163);solution.set(85,184);solution.get(38);solution.set(35,65);solution.get(70);solution.get(81);solution.set(40,65);solution.get(80);solution.set(80,23);solution.set(76,258);solution.get(69);solution.get(133);solution.set(123,196);solution.set(119,212);solution.set(13,150);solution.set(22,52);solution.set(20,105);solution.set(61,233);solution.get(97);solution.set(128,307);solution.get(85);solution.get(80);solution.get(73);solution.get(30);solution.set(46,44);solution.get(95);solution.set(121,211);solution.set(48,307);solution.get(2);solution.set(27,166);solution.get(50);solution.set(75,41);solution.set(101,105);solution.get(2);solution.set(110,121);solution.set(32,88);solution.set(75,84);solution.set(30,165);solution.set(41,142);solution.set(128,102);solution.set(105,90);solution.set(86,68);solution.set(13,292);solution.set(83,63);solution.set(5,239);solution.get(5);solution.set(68,204);solution.get(127);solution.set(42,137);solution.get(93);solution.set(90,258);solution.set(40,275);solution.set(7,96);solution.get(108);solution.set(104,91);solution.get(63);solution.get(31);solution.set(31,89);solution.get(74);solution.get(81);solution.set(126,148);solution.get(107);solution.set(13,28);solution.set(21,139);solution.get(114);solution.get(5);solution.get(89);solution.get(133);solution.get(20);solution.set(96,135);solution.set(86,100);solution.set(83,75);solution.get(14);solution.set(26,195);solution.get(37);solution.set(1,287);solution.get(79);solution.get(15);solution.get(6);solution.set(68,11);solution.get(52);solution.set(124,80);solution.set(123,277);solution.set(99,281);solution.get(133);solution.get(90);solution.get(45);solution.get(127);solution.set(9,68);solution.set(123,6);solution.set(124,251);solution.set(130,191);solution.set(23,174);solution.set(69,295);solution.get(32);solution.get(37);solution.set(1,64);solution.set(48,116);solution.get(68);solution.set(117,173);solution.set(16,89);solution.get(84);solution.set(28,234);solution.get(129);solution.get(89);solution.get(55);solution.get(83);solution.set(99,264);solution.get(129);solution.get(84);solution.get(14);solution.set(26,274);solution.get(109);solution.get(110);solution.set(96,120);solution.set(128,207);solution.get(12);solution.set(99,233);solution.set(20,305);solution.set(26,24);solution.set(102,32);solution.get(82);solution.set(16,30);solution.set(5,244);solution.get(130);solution.set(109,36);solution.set(134,162);solution.set(13,165);solution.set(45,235);solution.set(112,80);solution.get(6);solution.set(34,98);solution.set(64,250);solution.set(18,237);solution.set(72,21);solution.set(42,105);solution.set(57,108);solution.set(28,229);solution.get(83);solution.set(1,34);solution.set(93,151);solution.set(132,94);solution.set(18,24);solution.set(57,68);solution.set(42,137);solution.get(35);solution.get(80);solution.set(10,288);solution.get(21);solution.get(115);solution.get(131);solution.get(30);solution.get(43);solution.set(97,262);solution.set(55,146);solution.set(81,112);solution.set(2,212);solution.set(5,312);solution.set(82,107);solution.set(14,151);solution.get(77);solution.set(60,42);solution.set(90,309);solution.get(90);solution.set(131,220);solution.get(86);solution.set(106,85);solution.set(85,254);solution.get(14);solution.set(66,262);solution.set(88,243);solution.get(3);solution.set(50,301);solution.set(118,91);solution.get(25);solution.get(105);solution.get(100);solution.get(89);solution.set(111,152);solution.set(65,24);solution.set(41,264);solution.get(117);solution.get(117);solution.set(80,45);solution.get(38);solution.set(11,151);solution.set(126,203);solution.set(128,59);solution.set(6,129);solution.get(91);solution.set(118,2);solution.set(50,164);solution.get(74);solution.get(80);solution.set(48,308);solution.set(109,82);solution.set(3,48);solution.set(123,10);solution.set(59,249);solution.set(128,64);solution.set(41,287);solution.set(52,278);solution.set(98,151);solution.get(12);solution.get(25);solution.set(18,254);solution.set(24,40);solution.get(119);solution.set(66,44);solution.set(61,19);solution.set(80,132);solution.set(62,111);solution.get(80);solution.set(57,188);solution.get(132);solution.get(42);solution.set(18,314);solution.get(48);solution.set(86,138);solution.get(8);solution.set(27,88);solution.set(96,178);solution.set(17,104);solution.set(112,86);solution.get(25);solution.set(129,119);solution.set(93,44);solution.get(115);solution.set(33,36);solution.set(85,190);solution.get(10);solution.set(52,182);solution.set(76,182);solution.get(109);solution.get(118);solution.set(82,301);solution.set(26,158);solution.get(71);solution.set(108,309);solution.set(58,132);solution.set(13,299);solution.set(117,183);solution.get(115);solution.get(89);solution.get(42);solution.set(11,285);solution.set(30,144);solution.get(69);solution.set(31,53);solution.get(21);solution.set(96,162);solution.set(4,227);solution.set(77,120);solution.set(128,136);solution.get(92);solution.set(119,208);solution.set(87,61);solution.set(9,40);solution.set(48,273);solution.get(95);solution.get(35);solution.set(62,267);solution.set(88,161);solution.get(59);solution.get(85);solution.set(131,53);solution.set(114,98);solution.set(90,257);solution.set(108,46);solution.get(54);solution.set(128,223);solution.set(114,168);solution.set(89,203);solution.get(100);solution.get(116);solution.get(14);solution.set(61,104);solution.set(44,161);solution.set(60,132);solution.set(21,310);solution.get(89);solution.set(109,237);solution.get(105);solution.get(32);solution.set(78,101);solution.set(14,71);solution.set(100,47);solution.set(102,33);solution.set(44,29);solution.get(85);solution.get(37);solution.set(68,175);solution.set(116,182);solution.set(42,47);solution.get(9);solution.set(64,37);solution.set(23,32);solution.set(11,124);solution.set(130,189);solution.get(65);solution.set(33,219);solution.set(79,253);solution.get(80);solution.get(16);solution.set(38,18);solution.set(35,67);solution.get(107);solution.get(88);solution.set(37,13);solution.set(71,188);solution.get(35);solution.set(58,268);solution.set(18,260);solution.set(73,23);solution.set(28,102);solution.get(129);solution.get(88);solution.get(65);solution.get(80);solution.set(119,146);solution.get(113);solution.get(62);solution.set(123,138);solution.set(18,1);solution.set(26,208);solution.get(107);solution.get(107);solution.set(76,132);solution.set(121,191);solution.get(4);solution.get(8);solution.get(117);solution.set(11,118);solution.get(43);solution.get(69);solution.get(136);solution.set(66,298);solution.get(25);solution.get(71);solution.get(100);solution.set(26,141);solution.set(53,256);solution.set(111,205);solution.set(126,106);solution.get(43);solution.set(14,39);solution.set(44,41);solution.set(23,230);solution.get(131);solution.get(53);solution.set(104,268);solution.get(30);solution.set(108,48);solution.set(72,45);solution.get(58);solution.get(46);solution.set(128,301);solution.get(71);solution.get(99);solution.get(113);solution.get(121);solution.set(130,122);solution.set(102,5);solution.set(111,51);solution.set(85,229);solution.set(86,157);solution.set(82,283);solution.set(88,52);solution.set(136,105);solution.get(40);solution.get(63);solution.set(114,244);solution.set(29,82);solution.set(83,278);solution.get(131);solution.set(56,33);solution.get(123);solution.get(11);solution.get(119);solution.set(119,1);solution.set(48,52);solution.get(47);solution.set(127,136);solution.set(78,38);solution.set(117,64);solution.set(130,134);solution.set(93,69);solution.set(70,98);solution.get(68);solution.set(4,3);solution.set(92,173);solution.set(114,65);solution.set(7,309);solution.get(31);solution.set(107,271);solution.set(110,69);solution.get(45);solution.set(35,288);solution.get(20);solution.set(38,79);solution.get(46);solution.set(6,123);solution.get(19);solution.set(84,95);solution.get(76);solution.set(71,31);solution.set(72,171);solution.set(35,123);solution.get(32);solution.set(73,85);solution.get(94);solution.get(128);solution.get(28);solution.get(38);solution.get(109);solution.set(85,197);solution.set(10,41);solution.set(71,50);solution.get(128);solution.set(3,55);solution.set(15,9);solution.set(127,215);solution.get(17);solution.get(37);solution.set(111,272);solution.set(79,169);solution.set(86,206);solution.set(40,264);solution.get(134);solution.set(16,207);solution.set(27,127);solution.set(29,48);solution.set(32,122);solution.set(15,35);solution.set(117,36);solution.get(127);solution.get(36);solution.set(72,70);solution.set(49,201);solution.set(89,215);solution.set(134,290);solution.set(77,64);solution.set(26,101);solution.get(99);solution.set(36,96);solution.set(84,129);solution.set(125,264);solution.get(43);solution.get(38);solution.set(24,76);solution.set(45,2);solution.set(32,24);solution.set(84,235);solution.set(16,240);solution.set(17,289);solution.set(49,94);solution.set(90,54);solution.set(88,199);solution.get(23);solution.set(87,19);solution.set(11,19);solution.get(24);solution.get(57);solution.get(4);solution.get(40);solution.set(133,286);solution.set(127,231);solution.get(51);solution.set(52,196);solution.get(27);solution.get(10);solution.get(93);solution.set(115,143);solution.set(62,64);solution.set(59,200);solution.set(75,85);solution.set(7,93);solution.set(117,270);solution.set(116,6);solution.get(32);solution.get(135);solution.set(2,140);solution.set(23,1);solution.set(11,69);solution.set(89,30);solution.set(27,14);solution.get(100);solution.get(61);solution.set(99,41);solution.set(88,12);solution.get(41);solution.set(52,203);solution.get(65);solution.set(62,78);solution.set(104,276);solution.set(105,307);solution.get(7);solution.set(23,123);solution.get(22);solution.set(35,299);solution.get(69);solution.get(11);solution.set(14,112);solution.get(115);solution.get(112);solution.get(108);solution.set(110,165);solution.set(83,165);solution.set(36,260);solution.set(54,73);solution.get(36);solution.set(93,69);solution.get(134);solution.set(125,96);solution.set(74,127);solution.set(110,305);solution.set(92,309);solution.set(87,45);solution.set(31,266);solution.get(10);solution.set(114,206);solution.set(49,141);solution.get(82);solution.set(92,3);solution.set(91,160);solution.get(41);solution.set(60,147);solution.set(36,239);solution.set(23,296);solution.set(134,120);solution.get(6);solution.set(5,283);solution.set(117,68);solution.get(35);solution.get(120);solution.set(44,191);solution.set(121,14);solution.set(118,113);solution.set(84,106);solution.get(23);solution.set(15,240);solution.get(37);solution.set(52,256);solution.set(119,116);solution.set(101,7);solution.set(14,157);solution.set(29,225);solution.set(4,247);solution.set(8,112);solution.set(8,189);solution.set(96,220);solution.get(104);solution.set(72,106);solution.set(23,170);solution.set(67,209);solution.set(70,39);solution.get(18);solution.get(6);solution.get(34);solution.set(121,157);solution.get(16);solution.get(19);solution.set(83,283);solution.set(13,22);solution.set(33,143);solution.set(88,133);solution.get(88);solution.set(5,49);solution.get(38);solution.get(110);solution.get(67);solution.set(23,227);solution.get(68);solution.get(3);solution.set(27,265);solution.get(31);solution.set(13,103);solution.get(116);solution.set(111,282);solution.set(43,71);solution.get(134);solution.set(70,141);solution.get(14);solution.get(119);solution.get(43);solution.get(122);solution.set(38,187);solution.set(8,9);solution.get(63);solution.set(42,140);solution.get(83);solution.get(92);solution.get(106);solution.get(28);solution.set(57,139);solution.set(36,257);solution.set(30,204);solution.get(72);solution.set(105,243);solution.get(16);solution.set(74,25);solution.get(22);solution.set(118,144);solution.get(133);solution.get(71);solution.set(99,21);solution.get(26);solution.get(35);solution.set(89,209);solution.set(106,158);solution.set(76,63);solution.set(112,216);solution.get(128);solution.get(54);solution.set(16,165);solution.set(76,206);solution.set(69,253);solution.get(23);solution.set(54,111);solution.get(80);solution.set(111,72);solution.set(95,217);solution.get(118);solution.set(4,146);solution.get(47);solution.set(108,290);solution.get(43);solution.set(70,8);solution.get(117);solution.get(121);solution.set(42,220);solution.get(48);solution.get(32);solution.set(68,213);solution.set(30,157);solution.set(62,68);solution.get(58);solution.set(125,283);solution.set(132,45);solution.get(85);solution.get(92);solution.set(23,257);solution.get(74);solution.set(18,256);solution.get(90);solution.set(10,158);solution.set(57,34);solution.get(27);solution.get(107);

    }
}